(function(e){function t(t){for(var o,i,c=t[0],s=t[1],d=t[2],u=0,f=[];u<c.length;u++)i=c[u],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&f.push(r[i][0]),r[i]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);l&&l(t);while(f.length)f.shift()();return a.push.apply(a,d||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,c=1;c<n.length;c++){var s=n[c];0!==r[s]&&(o=!1)}o&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},r={app:0},a=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/three-js-experiment/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var l=s;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1217:function(e,t,n){},3672:function(e,t,n){"use strict";n("48de")},"48de":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23"),r=Object(o["n"])("data-v-5daff120");Object(o["h"])("data-v-5daff120");var a={class:"link-diagram-container"},i={class:"controls-container"};Object(o["g"])();var c=r((function(e,t,n,r,c,s){var d=Object(o["j"])("link-diagram"),l=Object(o["j"])("controls");return Object(o["f"])(),Object(o["c"])(o["a"],null,[Object(o["e"])("div",a,[Object(o["e"])(d,{links:c.links,nodes:c.nodes,onNodeSelect:s.onNodeSelect,sizeNodesBy:c.sizeNodesBy},null,8,["links","nodes","onNodeSelect","sizeNodesBy"])]),Object(o["e"])("div",i,[Object(o["e"])(l,{nodeData:c.nodeData,onSizeNodesBy:s.onSizeNodesBy,sizeNodesBy:c.sizeNodesBy,sizeNodesByOptions:c.sizeNodesByOptions},null,8,["nodeData","onSizeNodesBy","sizeNodesBy","sizeNodesByOptions"])])],64)})),s=(n("b0c0"),Object(o["n"])("data-v-037ac534"));Object(o["h"])("data-v-037ac534");var d={class:"controls"},l={class:"control"},u={key:0,class:"info"},f={class:"info-name"},p={class:"info-list"},m={key:1,class:"message"};Object(o["g"])();var b=s((function(e,t,n,r,a,i){var c;return Object(o["f"])(),Object(o["c"])("div",d,[Object(o["e"])("div",l,[n.nodeData?(Object(o["f"])(),Object(o["c"])("div",u,[Object(o["e"])("p",f,Object(o["k"])(null===(c=n.nodeData)||void 0===c?void 0:c.name),1),Object(o["e"])("ul",p,[(Object(o["f"])(!0),Object(o["c"])(o["a"],null,Object(o["i"])(i.nodeValues,(function(e,t){return Object(o["f"])(),Object(o["c"])("li",{key:t},[Object(o["e"])("span",null,Object(o["k"])(t)+":",1),Object(o["d"])(" "+Object(o["k"])(e),1)])})),128))])])):(Object(o["f"])(),Object(o["c"])("p",m,"No node is selected"))])])})),O=n("5530"),h={components:{},name:"Controls",props:{nodeData:{type:Object},sizeNodesBy:{type:String},sizeNodesByOptions:{type:Array}},computed:{nodeValues:function(){if(this.nodeData){var e=Object(O["a"])({},this.nodeData);for(var t in e)"count1"!==t&&"count2"!==t&&delete e[t];return e}}},methods:{onSizeNodesBySelect:function(e){this.$emit("sizeNodesBy",e.target.value)}}};n("9c8c");h.render=b,h.__scopeId="data-v-037ac534";var v=h,y=Object(o["n"])("data-v-0c8b46c7");Object(o["h"])("data-v-0c8b46c7");var j={class:"fullscreen link-diagram"},N={class:"fullscreen loading"},g={class:"content fullscreen",ref:"content"};Object(o["g"])();var w=y((function(e,t,n,r,a,i){return Object(o["f"])(),Object(o["c"])("div",j,[Object(o["m"])(Object(o["e"])("div",N,"Initialising...",512),[[o["l"],a.loading]]),Object(o["m"])(Object(o["e"])("div",g,null,512),[[o["l"],!a.loading]])])})),k=n("1da1"),S=(n("96cf"),n("d4ec")),z=n("ade3"),E=(n("159b"),n("5a89")),P=n("4721"),C=n("5698"),B=function(e){var t=e.color,n=e.radius,o=e.x,r=e.y,a=e.z,i=24,c=24,s=new E["p"](n,c,i),d=new E["j"]({color:t}),l=new E["e"],u=new E["i"](s,d);return l.geometry=s,l.material=d,l.mesh=u,l.add(u),l.position.set(o,r,a),l.color=t,l.currentColor=t,l.type="node",l.setScale=function(e){this.mesh.geometry.scale(e,e,e)},l.getPosition=function(){return this.position},l.setPosition=function(e){var t=e.x,n=e.y,o=e.z,r=void 0===o?0:o;this.position.set(t,n,r)},l.setColor=function(e){this.material.color.set(e)},l.isSelected=!1,l},D=function(e){var t=e.color,n=void 0===t?16777215:t,o=e.source,r=e.target,a=e.width,i=void 0===a?2:a,c=[o.getPosition(),r.getPosition()],s=(new E["a"]).setFromPoints(c),d=new E["g"]({color:n,linewidth:i}),l=new E["f"](s,d);return l.geometry=s,l.material=d,l.source=o,l.target=r,l.type="link",l.setPoints=function(e){var t=e.startPoint,n=e.endPoint;this.geometry.setFromPoints([t,n])},l},M=function(e){var t=e.links,n=e.nodes,o=e.onTick,r=C["c"]().force("charge",C["b"]()).force("link",C["a"]().id((function(e){return e.id}))).force("x",C["d"]()).force("y",C["e"]()).on("tick",o);r.nodes(n),r.force("link").links(t),r.alpha(1).restart().tick()},R=function e(t){var n=this,o=t.cameraType,r=void 0===o?e.CAMERA_TYPES.ORTHOGRAPHIC:o,a=t.links,i=t.nodes,c=t.onNodeSelect,s=t.sizeNodesBy,d=t.targetEl;return function(){Object(S["a"])(n,e),Object(z["a"])(n,"HOVER_COLOR",15455773),Object(z["a"])(n,"SELECTED_COLOR",16777215),Object(z["a"])(n,"STAGE_BG_COLOR",2236962),Object(z["a"])(n,"init",(function(){var t=window.innerHeight,o=window.innerWidth;if(n.raycaster=new E["n"],n.renderer=new E["u"]({antialias:!0}),n.renderer.setSize(o,t),n.el.append(n.renderer.domElement),n.scene=new E["o"],n.scene.background=new E["b"](n.STAGE_BG_COLOR),n.cameraType===e.CAMERA_TYPES.PERSPECTIVE)n.camera=new E["l"](45,o/t,1,n.frustumSize);else{var r=window.innerWidth/window.innerHeight;n.camera=new E["k"](n.frustumSize*r/-5,n.frustumSize*r/5,n.frustumSize/5,n.frustumSize/-5,1,1e3)}n.camera.position.x=0,n.camera.position.y=0,n.camera.position.z=250,n.scene.add(n.camera);var a=new E["c"](16777215,1);a.position.set(0,0,1e3),n.controls=new P["a"](n.camera,n.renderer.domElement),n.controls.enableRotate=!1,n.controls.enablePan=!0,n.cameraType===e.CAMERA_TYPES.PERSPECTIVE?(n.controls.maxDistance=250,n.controls.minDistance=10):(n.controls.maxZoom=8,n.controls.minZoom=1),n.controls.enableDamping=!0,n.controls.dampingFactor=.05,n.controls.panSpeed=1,n.controls.mouseButtons={LEFT:E["h"].PAN},n.controls.update(),n.scene.add(a)})),Object(z["a"])(n,"start",(function(){M({links:n.linksData,nodes:n.nodesData,onTick:n.update}),n.render()})),Object(z["a"])(n,"update",(function(){n.nodesData.forEach((function(e){var t=e.id,o=e.x,r=e.y,a=e.z,i=n.nodeLookup[t];i.setPosition({x:o,y:r,z:a})})),n.linksData.forEach((function(e){var t=e.id,o=n.linkLookup[t],r=o.target.getPosition(),a=o.source.getPosition();o.setPoints({endPoint:r,startPoint:a})}))})),Object(z["a"])(n,"render",(function(){n.controls.update(),n.raycaster.setFromCamera(n.pointer,n.camera);var e=n.raycaster.intersectObjects(n.scene.children,!0);if(e.length>0){var t=e[0].object.parent;"node"===t.type&&n.focusedNode!==t&&(n.focusedNode&&n.focusedNode.setColor(n.focusedNode.currentColor),n.focusedNode=t,n.focusedNode.setColor(n.HOVER_COLOR),n.el.style.cursor="pointer")}else n.focusedNode&&n.focusedNode.setColor(n.focusedNode.currentColor),n.focusedNode=null,n.el.style.cursor="auto";requestAnimationFrame(n.render),n.renderer.render(n.scene,n.camera)})),Object(z["a"])(n,"updateNodeSizing",(function(e){n.sizeNodesBy=e,n.processData(),n.nodes.forEach((function(e){var t=e.element,n=e.scale;t.setScale(n)}))})),Object(z["a"])(n,"processData",(function(){var t=10,o=1e3;n.nodesData.forEach((function(e){var t=e[n.sizeNodesBy];(void 0===o||t>o)&&(o=t)})),n.nodesData.forEach((function(r){var a=r[n.sizeNodesBy],i=Math.ceil(a/o*t);n.cameraType===e.CAMERA_TYPES.PERSPECTIVE?(r.scale=1,r.z=-(.8*i*50+100)):(r.scale=.2+.08*i,r.z=0)}))})),Object(z["a"])(n,"onPointerMove",(function(e){n.pointer.x=e.clientX/window.innerWidth*2-1,n.pointer.y=-e.clientY/window.innerHeight*2+1})),Object(z["a"])(n,"onPointerClick",(function(){var e=n.focusedNode!==n.selectedNode;n.selectedNode&&(n.selectedNode.currentColor=n.selectedNode.color,n.selectedNode.setColor(n.selectedNode.color),n.selectedNode=null),n.focusedNode&&e?(n.selectedNode=n.focusedNode,n.selectedNode.currentColor=n.SELECTED_COLOR,n.selectedNode.setColor(n.selectedNode.currentColor),n.onNodeSelect(n.selectedNode.data)):n.onNodeSelect(null)})),Object(z["a"])(n,"onWindowResize",(function(){if(n.cameraType===e.CAMERA_TYPES.PERSPECTIVE)n.camera.aspect=window.innerWidth/window.innerHeight;else{var t=window.innerWidth/window.innerHeight;n.camera.left=-n.frustumSize*t/5,n.camera.right=n.frustumSize*t/5,n.camera.top=n.frustumSize/5,n.camera.bottom=-n.frustumSize/5}n.camera.updateProjectionMatrix(),n.renderer.setSize(window.innerWidth,window.innerHeight)})),n.cameraType=r,n.el=d,n.frustumSize=1e3,n.hoveredNode,n.links=[],n.linkLookup={},n.linksData=a,n.onNodeSelect=c,n.nodes=[],n.nodeLookup={},n.nodesData=i,n.selectedNode,n.sizeNodesBy=s,n.pointer=new E["s"],n.init(),n.processData(),n.nodesData.forEach((function(e){var t=B({color:e.color,radius:10,x:e.x||0,y:e.y||0,z:e.z||0});t.data=e,t.setScale(e.scale),n.nodeLookup[e.id]=t,n.nodes.push(t),n.scene.add(t)})),n.linksData.forEach((function(e){var t=D({source:n.nodeLookup[e.source.id],target:n.nodeLookup[e.target.id]});t.data=e,n.linkLookup[e.id]=t,n.links.push(t),n.scene.add(t)})),document.addEventListener("pointermove",n.onPointerMove),document.addEventListener("click",n.onPointerClick),window.addEventListener("resize",n.onWindowResize),n.start()}()};Object(z["a"])(R,"CAMERA_TYPES",{ORTHOGRAPHIC:"orthographic",PERSPECTIVE:"perspective"});var T=R,_=T,A={name:"LinkDiagram",data:function(){return{loading:!0}},props:{links:{type:Array},nodes:{type:Array},onNodeSelect:{type:Function},sizeNodesBy:{type:String}},watch:{sizeNodesBy:function(e){this.linkDiagram.updateNodeSizing(e)}},methods:{init:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:!0===e.loading&&e.nodes&&e.links&&(e.loading=!1,e.linkDiagram=new _({links:e.links,nodes:e.nodes,onNodeSelect:e.onNodeSelect,sizeNodesBy:e.sizeNodesBy,targetEl:e.$refs.content}));case 1:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.init()},updated:function(){this.init()}};n("62f1");A.render=w,A.__scopeId="data-v-0c8b46c7";var L=A,x=[{label:"Count 1",value:"count1"},{label:"Count 2",value:"count2"}],H={name:"App",components:{Controls:v,LinkDiagram:L},data:function(){return{links:null,nodes:null,nodeData:null,sizeNodesByOptions:x,sizeNodesBy:x[0].value}},methods:{onNodeSelect:function(e){this.nodeData=e},onSizeNodesBy:function(e){this.sizeNodesBy=e}},mounted:function(){for(var e=[],t=[],n=["#609DC9","#AA60C9","#C96060","#B7AE5C"],o=0;o<100;o++)t.push({color:n[Math.floor(4*Math.random())],count1:Math.round(1e3*Math.random()),count2:Math.round(1e3*Math.random()),id:o,name:"Node ".concat(o+1)});for(var r=0;r<90;r++)e.push({count1:Math.round(300*Math.random()),count2:Math.round(300*Math.random()),id:r,source:t[Math.floor(100*Math.random())],target:t[Math.floor(100*Math.random())]});this.links=e,this.nodes=t}};n("f3fa"),n("3672");H.render=c,H.__scopeId="data-v-5daff120";var I=H;Object(o["b"])(I).mount("#app")},"62f1":function(e,t,n){"use strict";n("d834")},7776:function(e,t,n){},"9c8c":function(e,t,n){"use strict";n("7776")},d834:function(e,t,n){},f3fa:function(e,t,n){"use strict";n("1217")}});
//# sourceMappingURL=app.5351c218.js.map